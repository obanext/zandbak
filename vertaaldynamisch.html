<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Webpage Translation</title>
    <style>
        /* Add some styling to align images to the right and control the size of the images */
        #language-selector {
            text-align: right;
            margin-bottom: 20px; /* Add some space between the selector and the content */
        }
        #language-selector img {
            width: 25px; /* Reduced size */
            height: 25px; /* Reduced size */
            border-radius: 50%; /* This makes the images round */
            margin-left: 10px; /* Add some space between the images */
        }
        /* Create a flex container for the content */
        #content {
            display: flex;
        }
        /* Create a 50/50 split between the text and the image */
        #content .text, #content .image-container {
            width: 50%;
        }
        #content .image-container img {
            /* Make the image responsive */
            width: 50%;
            height: auto;
        }
    </style>
    <script>
        // Variables to store the selected language and the original text
        let selectedLang = 'nl';
        let originalText = 'OBA Next is het innovatieprogramma van de OBA om te komen tot de nieuwe Amsterdamse bibliotheek van de toekomst...';
        
        function createLanguageSelector() {
            // JavaScript code...
        }
        
        function translatePage(lang) {
            fetch('https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=' + lang, {
                method: 'POST',
                headers: {
                    'Ocp-Apim-Subscription-Key': '85f583d33db041b7abcce5522527b562',
                    'Content-Type': 'application/json',
                    'Ocp-Apim-Subscription-Region': 'westeurope'
                },
                body: JSON.stringify([{'Text' : originalText}]),
            })
            .then(response => response.json())
            .then(data => {
                let translatedText = data[0].translations[0].text;
                document.getElementById('text-content').textContent = translatedText;
            })
            .catch(error => console.error('Error:', error));
        }
        
        function searchInLibrary() {
            fetch('https://zoeken.oba.nl/api/v1/search/?q=OBA%20Next&authorization=d7519ea81ad4e06ab5e5dac46ddeb63a&output=json', {
                method: 'GET',
            })
            .then(response => response.json())
            .then(data => {
                let summary = data.results[0].summaries.summary;
                document.getElementById('summary').textContent = summary;
                
                // Update the original text and translate the summary
                originalText = summary;
                translatePage(selectedLang);
            })
            .catch(error => console.error('Error:', error));
        }

        // Run the createLanguageSelector function when the page loads
        window.onload = function() {
            createLanguageSelector();
            searchInLibrary();
            
            // Add a click event listener to each image
            const images = document.querySelectorAll('#language-selector img');
            images.forEach(img => {
                img.addEventListener('click', function() {
                    // Update the selected language and translate the page
                    selectedLang = this.dataset.lang;
                    translatePage(selectedLang);
                });
            });
        };
    </script>
</head>
<body>
    <div id="language-selector"></div>
    <div id="content">
        <div class="text" id="text-content">
            OBA Next is het innovatieprogramma van de OBA om te komen tot de nieuwe Amsterdamse bibliotheek van de toekomst...
        </div>
        <div class="text" id="summary"></div>
    </div>
</body>
</html>
